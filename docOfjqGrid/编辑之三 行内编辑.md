# jqGrid 编辑之行内编辑

行内编辑，就是将指定行的各列变为可编辑状态，jqGrid 包含这种功能。

下面是使用到的一些方法：

## editRow
语法：

```js
$("#grid_id").jqGrid( "editRow",rowid, keys, oneditfunc, successfunc, 
                        url, extraparam, aftersavefunc,errorfunc, afterrestorefunc);
```

参数

* rowid 编辑行的行 id 

* keys 布尔值，是否启用键盘快捷键，[enter] 保存编辑， [esc] 取消编辑

* oneditfunc 回调函数，在行变为可编辑状态那一刻执行，有一个参数，rowId，编辑行的 id 。

successfunc，url，extraparam，aftersavefunc，errorfunc，afterrestorefunc 会在 saveRow 方法中解释。

另一种传参方式，在 jqGrid 4.0 以后，可以像下面一样传参：

```js
// 很常见，以对象方式
// 这样在只需要第一个和最后一个参数时不用狂写所有的参数了
$("#grid_id").jqGrid( 'editRow', rowid, { 
    keys : true, 
    oneditfunc: function() {
        alert ("edited"); 
    }
});
```

参数默认值：

```js
// 其实下面属性名的引号可以不需要
editparameters = {
    "keys" : false,
    "oneditfunc" : null,
    "successfunc" : null,
    "url" : null,
    "extraparam" : {},
    "aftersavefunc" : null,
    "errorfunc": null,
    "afterrestorefunc" : null,
    "restoreAfterError" : true,
    "mtype" : "POST"
}
```

当 keys 设置为 true，那么按 [enter] 键会调用 saveRow 方法，按 [ esc ] 键会调用 restoreRow 方法。


## saveRow

保存被编辑的行，语法：

```js
$( "#grid_id" ).jqGrid( "saveRow", rowid, successfunc, url, extraparam, aftersavefunc, errorfunc, afterrestorefunc );
```

同 editRow 方法一样，参数可以以对象的形式传入，如下：

```js
$( "#grid_id" ).jqGrid( "saveRow", rowid, { 
    successfunc: function( response ) {
        return true; 
    }
});
```

参数默认值如下：

```js
// 属性名可以不需要引号
saveparameters = {
    "successfunc" : null,
    "url" : null,
    "extraparam" : {},
    "aftersavefunc" : null,
    "errorfunc": null,
    "afterrestorefunc" : null,
    "restoreAfterError" : true,
    "mtype" : "POST"
}
```

其中：

* rowid：要保存的行的 id 

* successfunc：

    函数，保存到服务器的请求成功时会执行该函数。

    有一个参数，服务端返回的字符串。

    根据服务端返回的信息，这个函数应该返回 true 或者 false 。 ？？？

* url： 
    
    如果设置了该值，将会覆盖 editurl 。

    如果设置为 clientArray ，那么只会保存到本地而不会同步到数据库。

* extraparam： 
    
    键值对，这些值会被传递到后台。

* aftersavefunc：
    
    同步到服务器完成后，执行该函数。

    两个参数, rowid 和 response ，分别表示保存行的 id 和 服务端返回的信息。

    就算 url 设置为 clientArray ，仍旧会执行该函数。

* errorfun：
    
    和 aftersavefunc 一模一样。

    搞不定 jqGrid 搞这个回调的用意啊。

* afterrestorefun：
    
    还原编辑行 ( restoreRow ) 后执行该方法。

    参数为 rowid，编辑行的 id 。
