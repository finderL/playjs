<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title> 3000-source </title>
</head>
<body>
    <h1> window.name 的跨域 </h1>
    <div id="console"></div>

    <script type="text/javascript">
        var con = document.getElementById( "console" );
        var iframe = document.createElement( "iframe" );
        iframe.style.display = "none";
        iframe.src = "http://localhost:3001/crossdomain/name/3001.html";

        var state;
        var loaded = function() {
            if ( state ) {
                var data = iframe.contentWindow.name;
                con.innerHTML = "跨域访问的数据是：" + data || "失败";
                iframe.removeEventListener( "load", loaded );
                iframe.contentWindow.document.write( "" );
                iframe.contentWindow.close();
                document.body.removeChild( iframe );
            } else {
                state = 1;
                iframe.src = "http://localhost:3000/crossdomain/name/3000proxy.html";
            }
        };

        iframe.addEventListener( "load", loaded, false );

        document.body.appendChild( iframe );
    </script>
</body>
</html>